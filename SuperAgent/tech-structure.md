# 项目技术结构

## 基本信息
- **项目类型**: SillyTavern浏览器扩展插件
- **语言**: JavaScript
- **UI框架**: jQuery + 原生HTML/CSS
- **架构模式**: 模块化分层架构

## 技术栈
- **向量化引擎**: Transformers.js, Ollama, vLLM, WebLLM, OpenAI, Cohere
- **AI接口**: OpenAI兼容API, Google Gemini API
- **存储方案**: 浏览器本地存储(extension_settings)
- **事件系统**: 自定义EventBus + SillyTavern事件系统

## 当前实现
- **模块化程度**: 85%代码已模块化
- **UI组件**: 15+独立可复用组件
- **设计模式**: 工厂模式、适配器模式、观察者模式、策略模式
- **安全机制**: secrets系统、循环引用检测、并发控制

## 核心功能
1. **向量化管理**: 多引擎支持、批量处理、去重机制
2. **记忆系统**: AI总结生成、世界书集成、自动触发
3. **外挂任务**: 跨聊天共享、引用机制、智能解析
4. **内容注入**: 语义匹配、灵活位置、标签触发

## 性能指标
- **初始化时间**: < 500ms
- **1000条消息向量化**: < 30s
- **查询响应时间**: < 200ms
- **内存占用**: 动态优化

## 开发规范
- **代码风格**: 驼峰命名、中文注释
- **错误处理**: try-catch保护、降级机制
- **依赖管理**: 依赖注入、避免循环引用
- **版本控制**: Git Flow、语义化版本