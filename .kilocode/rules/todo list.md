# 代码审查与解耦准备：待办事项清单

**原则：只审查，不修改代码。**

## 阶段一：高阶分析与理解

- [x] **1.1. 项目结构扫描：** 识别并记录项目的主要文件和目录结构。
    - [x] `index.js`: 主要逻辑入口。
    - [x] `settings.html` / `style.css`: 用户界面。
    - [x] `webllm.js`: WebLLM 相关功能。
    - [x] `debug/`: 调试工具集。
- [x] **1.2. 依赖关系初步映射：** 识别文件间的显式依赖（例如 `script src`）。

## 阶段二：深度审查 - 识别耦合点

### 子任务 2.1：全局状态与作用域分析
- [x] **2.1.1. 全局变量审查：** 扫描 `index.js` 和其他脚本，列出所有在全局作用域中声明的变量。
- [x] **2.1.2. 单例/全局对象识别：** 查找项目中充当全局可访问状态或服务的对象实例。

### 子任务 2.2：硬编码依赖分析
- [x] **2.2.1. 实例创建审查：** 在 `.js` 文件中搜索 `new` 关键字，找出在一个模块内部直接创建另一个具体类实例的地方。
- [x] **2.2.2. 模块间直接调用映射：** 绘制出主要模块（如 `index.js`, `debugger.js`, `ui-manager.js`）之间的函数/方法直接调用关系图。

### 子任务 2.3：职责与内聚度分析 (单一职责原则)
- [x] **2.3.1. `index.js` 职责分析：** 列出 `index.js` 目前承担的所有不同职责（如：DOM 操作、事件监听、状态管理、API 调用等）。
- [x] **2.3.2. 关注点分离审查：** 评估 `settings.html` 的视图逻辑与 `index.js` 中的业务逻辑是否有效分离。是否存在 JS 中拼接 HTML 的情况？
- [x] **2.3.3. `debugger.js` 职责分析：** 确定 `debugger.js` 的核心职责，评估其是否混合了过多的 UI 管理或数据分析逻辑。

### 子任务 2.4：代码重复分析 (DRY 原则)
- [x] **2.4.1. 通用代码块扫描：** 查找在不同 `.js` 文件中重复出现的相似代码片段。
- [x] **2.4.2. 分析器逻辑比较：** 对比 `debug/analyzers/` 目录下的各个分析器，寻找可被抽象的重复逻辑模式。

## 阶段三：审查总结
- [ ] **3.1. 编写审查报告：** 将以上所有发现汇总成一份初步的审查报告文档。
